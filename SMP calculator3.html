<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SMP Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4, #a18cd1);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      margin: 0;
      min-height: 100vh;
      transition: all 0.3s ease;
    }

    h1 {
      margin-bottom: 20px;
      text-align: center;
      color: #fff;
      text-shadow: 2px 2px 8px #00000050;
      font-size: 2.2em;
    }

    label {
      margin-top: 10px;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 8px;
      color: #fff;
      text-shadow: 1px 1px 5px #00000050;
    }

    input {
      margin: 5px 0 15px 0;
      padding: 8px;
      width: 200px;
      border-radius: 5px;
      border: none;
      box-shadow: 1px 1px 5px #00000030;
    }

    button {
      padding: 10px 25px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      margin-top: 10px;
      font-weight: bold;
      font-size: 16px;
      transition: all 0.2s;
      box-shadow: 2px 2px 8px #00000030;
    }

    button:hover {
      transform: scale(1.05);
      box-shadow: 3px 3px 12px #00000050;
    }

    #calculateBtn {
      background: linear-gradient(45deg, #ff6a00, #ee0979);
      color: white;
    }

    #resultText, #initialAmountText {
      margin-top: 15px;
      font-size: 20px;
      font-weight: bold;
      text-align: center;
      transition: all 0.3s ease;
    }

    .language-switch, .mode-switch {
      position: fixed;
      top: 10px;
      display: flex;
      gap: 5px;
      z-index: 100;
    }

    .language-switch { left: 10px; }
    .mode-switch { right: 10px; align-items:center;}
    .tooltip {
      position: relative;
      display: inline-block;
      cursor: pointer;
      font-size: 16px;
      margin-left: 5px;
      color: #fff;
      font-weight: bold;
    }
    .tooltip .tooltiptext {
      visibility: hidden;
      width: 250px;
      background-color: #333;
      color: #fff;
      text-align: left;
      border-radius: 6px;
      padding: 10px;
      position: absolute;
      z-index: 1;
      top: 25px;
      right: 0;
      font-size: 14px;
      line-height: 1.4;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }

    .language-switch button, .mode-switch button {
      background-color: #333;
      color: white;
      padding: 6px 14px;
      font-size: 14px;
      border-radius: 8px;
    }

    .warning {
      margin-top: 20px;
      padding: 12px;
      border-radius: 12px;
      background: rgba(255,255,255,0.3);
      text-align: center;
      font-weight: bold;
      color: #fff;
      max-width: 420px;
      text-shadow: 1px 1px 5px #00000050;
    }

    .item-icon {
      width: 24px;
      height: 24px;
      background-color: #fff;
      border-radius: 50%;
      display: inline-block;
    }

    @media (max-width: 500px) {
      input { width: 100%; }
      .warning { font-size: 14px; }
      h1 { font-size: 1.8em; }
    }
  </style>
</head>
<body>
  <!-- أزرار اللغة -->
  <div class="language-switch">
    <button id="langArBtn" onclick="setLanguage('ar')">العربية</button>
    <button id="langEnBtn" onclick="setLanguage('en')">English</button>
  </div>

  <!-- أزرار الوضع مع Tooltip -->
  <div class="mode-switch">
    <div>
      <button id="conversionBtn" onclick="setMode('conversion')"></button>
      <span class="tooltip">?
        <span class="tooltiptext" id="conversionTooltip"></span>
      </span>
    </div>
    <div>
      <button id="combineBtn" onclick="setMode('combine')"></button>
      <span class="tooltip">?
        <span class="tooltiptext" id="combineTooltip"></span>
      </span>
    </div>
  </div>

  <h1 id="title"></h1>
<!-- المدخلات -->
  <div>
    <label id="item1"><span class="item-icon"></span> العنصر الأول</label>
    <input type="number" id="price1" placeholder="" min="0">
    <input type="number" id="qty1" placeholder="" min="0">
  </div>

  <div>
    <label id="item2"><span class="item-icon"></span> العنصر الثاني</label>
    <input type="number" id="price2" placeholder="" min="0" disabled>
    <input type="number" id="qty2" placeholder="" min="0">
  </div>

  <div>
    <label id="item3"><span class="item-icon"></span> العنصر الثالث</label>
    <input type="number" id="price3" placeholder="" min="0">
    <input type="number" id="qty3" placeholder="" min="0">
  </div>

  <button id="calculateBtn" onclick="calculate()"></button>

  <div id="initialAmountText"></div>
  <div id="resultText"></div>
  <div class="warning" id="warningText"></div>

  <script>
    const langAR = {
      title: "SMP Calculator",
      item1: "العنصر الأول",
      item2: "العنصر الثاني",
      item3: "العنصر الثالث",
      price: "سعر للحبة",
      qty: "الكمية",
      calculate: "احسب",
      result: "الربح/الخسارة: ",
      finalAmount: "المبلغ النهائي: ",
      initialAmount: "المبلغ الأصلي: ",
      warning: "⚠️ هذه الحسابات تقريبية ولا تمثل النتائج الدقيقة داخل اللعبة.",
      conversionBtn: "وضع التحليل",
      conversionTooltip: "وضع التحليل:\nحدد سعر وكمية العنصر الأول، بعدها يتم تحويله للعنصر الثاني (لا تحدد سعر العنصر الثاني)، ثم تحويله للعنصر الثالث.",
      combineBtn: "وضع الجمع",
      combineTooltip: "وضع الجمع:\nسيتم الجمع بين العنصر الأول والثاني لينتج العنصر الثالث (أضف الشرح لاحقًا)."
    };

    const langEN = {
      title: "SMP Calculator",
      item1: "Item 1",
      item2: "Item 2",
      item3: "Item 3",
      price: "Price per unit",
      qty: "Quantity",
      calculate: "Calculate",
      result: "Profit/Loss: ",
      finalAmount: "Final Amount: ",
      initialAmount: "Initial Amount: ",
      warning: "⚠️ These calculations are approximate and do not represent exact in-game results.",
      conversionBtn: "Conversion Mode",
      conversionTooltip: "Conversion Mode:\nEnter price & quantity of first item, then convert to second item (do not enter price for second item), then convert to third item.",
      combineBtn: "Combine Mode",
      combineTooltip: "Combine Mode:\nFirst and second items are combined to produce third item (add your explanation here)."
    };

    let currentLang = 'ar';
    let currentMode = 'conversion';

    function setLanguage(lang) {
      currentLang = lang;
      const data = lang === "ar" ? langAR : langEN;

      document.getElementById("title").innerText = data.title;
      document.getElementById("item1").innerText = data.item1;
      document.getElementById("item2").innerText = data.item2;
      document.getElementById("item3").innerText = data.item3;

      document.getElementById("price1").placeholder = data.price;
      document.getElementById("qty1").placeholder = data.qty;
      document.getElementById("price2").placeholder = data.price;
      document.getElementById("qty2").placeholder = data.qty;
      document.getElementById("price3").placeholder = data.price;
      document.getElementById("qty3").placeholder = data.qty;

      document.getElementById("calculateBtn").innerText = data.calculate;
      document.getElementById("warningText").innerText = data.warning;

      document.getElementById("conversionBtn").innerText = data.conversionBtn;
      document.getElementById("combineBtn").innerText = data.combineBtn;
      document.getElementById("conversionTooltip").innerText = data.conversionTooltip;
      document.getElementById("combineTooltip").innerText = data.combineTooltip;

      document.getElementById("initialAmountText").innerText = "";
      document.getElementById("resultText").innerText = "";
    }

    function setMode(mode) {
      currentMode = mode;
      document.getElementById("price2").disabled = (mode === 'conversion'); // تعطيل سعر العنصر الثاني في التحليل
      calculate();
    }

    function formatNumber(num) {
      return num.toLocaleString();
    }
function calculate() {
      const prices = [
        Number(document.getElementById("price1").value) || 0,
        Number(document.getElementById("price2").value) || 0,
        Number(document.getElementById("price3").value) || 0
      ];

      const qtys = [
        Number(document.getElementById("qty1").value) || 0,
        Number(document.getElementById("qty2").value) || 0,
        Number(document.getElementById("qty3").value) || 0
      ];

      const data = currentLang === "ar" ? langAR : langEN;

      let initialAmount = prices[0] * qtys[0];
      let finalAmount = 0;
      let profit = 0;

      if (currentMode === 'conversion') {
        const conversion1to2 = 3;
        const conversion2to3 = 9;
        const item2Qty = qtys[0] * conversion1to2;
        const item3Qty = Math.floor(item2Qty / conversion2to3);
        finalAmount = item3Qty * prices[2];
        profit = finalAmount - initialAmount;
      } else if (currentMode === 'combine') {
        const totalQty = qtys[0] + qtys[1];
        finalAmount = totalQty * prices[2];
        initialAmount += prices[1] * qtys[1];
        profit = finalAmount - initialAmount;
      }

      document.getElementById("initialAmountText").innerText = data.initialAmount + formatNumber(initialAmount);

      const resultDiv = document.getElementById("resultText");
      resultDiv.innerText = data.result + formatNumber(profit) + " | " + data.finalAmount + formatNumber(finalAmount);
      resultDiv.style.background = "transparent";
      resultDiv.style.padding = "0"; 
      resultDiv.style.color = profit > 0 ? "limegreen" : (profit === 0 ? "yellow" : "red");

      resultDiv.style.transform = "scale(1.2)";
      setTimeout(() => { resultDiv.style.transform = "scale(1)"; }, 300);
    }

    setLanguage(currentLang);
  </script>
</body>
</html>